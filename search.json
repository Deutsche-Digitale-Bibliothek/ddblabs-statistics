[
  {
    "objectID": "statistic-federal_state.html",
    "href": "statistic-federal_state.html",
    "title": "Statistik nach Bundesland",
    "section": "",
    "text": "Notebook erzeugt df_join und wertet anschließend nach Bundesland aus.\nQuelltext anzeigen\nimport requests\nimport pandas as pd"
  },
  {
    "objectID": "statistic-federal_state.html#provider-facets-dataprovider_id",
    "href": "statistic-federal_state.html#provider-facets-dataprovider_id",
    "title": "Statistik nach Bundesland",
    "section": "1) Provider-Facets (dataprovider_id)",
    "text": "1) Provider-Facets (dataprovider_id)\nAus der DDB-Suche kommt eine Facet-Statistik zu dataprovider_id (Anzahl Objekte pro Provider). Das Ergebnis steht als DataFrame df bereit und ist auf 32-stellige Provider-IDs gefiltert.\n\n\nQuelltext anzeigen\nurl = \"https://api.deutsche-digitale-bibliothek.de/2/search/index/search/select\"\nparams = {\n    \"q\": \"*:*\",\n    \"rows\": 0,\n    \"facet\": \"true\",\n    \"facet.field\": \"dataprovider_id\",\n    \"facet.limit\": -1,\n    \"facet.sort\": \"count\",\n    \"wt\": \"json\",\n}\n\nresp = requests.get(url, params=params, timeout=300)\nresp.raise_for_status()\ndata = resp.json()\n\nfacet_list = data[\"facet_counts\"][\"facet_fields\"][\"dataprovider_id\"]  # [\"id1\", count1, \"id2\", count2, ...]\npairs = list(zip(facet_list[0::2], facet_list[1::2]))\n\ndf = pd.DataFrame(pairs, columns=[\"dataprovider_id\", \"count\"])\ndf[\"dataprovider_id\"] = df[\"dataprovider_id\"].astype(str)\ndf[\"count\"] = pd.to_numeric(df[\"count\"], errors=\"coerce\").fillna(0).astype(\"int64\")\n\ndf = df[df[\"dataprovider_id\"].str.len() == 32].reset_index(drop=True)\n\ndf\n\n\n\n\n\n\n\n\n\ndataprovider_id\ncount\n\n\n\n\n0\n2Q37XY5KXJNJE5MV6SWP3UKKZ6RSBLK5\n7668317\n\n\n1\nXYMQPA4OHAYDDFYWHV6Q4RFUIISTLQJV\n6551893\n\n\n2\nVSHJWG7QLS7Y3NS2HKE43E5Q5NJ7OCLS\n4144240\n\n\n3\nUG6LMRBTZUJVW6YRDFGWG6CS2TMNUOK7\n3228053\n\n\n4\nPE423JPDSCU6C72BAC2PUBOHAINDRGFO\n2675700\n\n\n...\n...\n...\n\n\n815\nPO2SRBK67WA77KXNBM4OTLK3QBQZVLUU\n1\n\n\n816\nVH3B3BVEVLGX2XZA5SRAL2CYJOW6YV76\n1\n\n\n817\nVJTKMQU5TUCJUM6IAK3AIAKZ42T6TPPT\n1\n\n\n818\nX5ZAM2PHVI5EKZZ33QB6XRUBQ6MKA5L7\n1\n\n\n819\nZ572GP2DQDVYMC3KXUB6GTPAPFWYD47C\n1\n\n\n\n\n820 rows × 2 columns"
  },
  {
    "objectID": "statistic-federal_state.html#organisationsdaten-ddb-institution-ddb-aggregator",
    "href": "statistic-federal_state.html#organisationsdaten-ddb-institution-ddb-aggregator",
    "title": "Statistik nach Bundesland",
    "section": "2) Organisationsdaten (ddb-institution / ddb-aggregator)",
    "text": "2) Organisationsdaten (ddb-institution / ddb-aggregator)\nMetadaten zu Einrichtungen/Providern werden aus dem Organisation-Index geladen; Listenfelder werden dabei normalisiert. Ergebnis: df_org (u.a. label, sector_fct, city_de_fct, state_de_fct).\n\n\nQuelltext anzeigen\n# Organization-Daten (ddb-institution) laden -&gt; DataFrame\nurl_org = \"https://api.deutsche-digitale-bibliothek.de/2/search/index/organization/select\"\nparams_org = {\n    \"q\": \"type:ddb-institution OR type:ddb-aggregator\",\n    \"fl\": \"id,label,type,sector_fct,city_de_fct,state_de_fct\",\n    \"rows\": 10000,\n    \"wt\": \"json\",\n}\n\nresp_org = requests.get(url_org, params=params_org, timeout=300)\nresp_org.raise_for_status()\ndata_org = resp_org.json()\n\ndocs = data_org.get(\"response\", {}).get(\"docs\", [])\n\ndef _as_list(value):\n    if value is None:\n        return []\n    # Solr liefert bei *_fct i.d.R. Listen; zur Sicherheit wird auch ein Scalar zu einer Liste normalisiert\n    return value if isinstance(value, list) else [value]\n\ndf_org = pd.DataFrame({\n    \"id\": [d.get(\"id\") for d in docs],\n    \"label\": [_as_list(d.get(\"label\")) for d in docs],\n    \"type\": [d.get(\"type\") for d in docs],\n    \"sector_fct\":  [d.get(\"sector_fct\") for d in docs],\n    \"city_de_fct\": [_as_list(d.get(\"city_de_fct\")) for d in docs],\n    \"state_de_fct\": [_as_list(d.get(\"state_de_fct\")) for d in docs],\n})\n\ndf_org\n\n\n\n\n\n\n\n\n\nid\nlabel\ntype\nsector_fct\ncity_de_fct\nstate_de_fct\n\n\n\n\n0\n5IMBCSZN7ZVL77HVH4GKX3GXNPD6X2NO\n[Deutsche Fotothek]\nddb-aggregator\nsec_05\n[Dresden]\n[Sachsen]\n\n\n1\nDWIVLJW5JBO7X4XRO2Y7PCGZSHLTUS6F\n[Digitales Kunst- und Kulturarchiv Düsseldorf ...\nddb-aggregator\nsec_07\n[Düsseldorf]\n[Nordrhein-Westfalen]\n\n\n2\n3IJSQ3OFJZCXLJLKDTIQIPYYS5TUMJLB\n[Bayerische Julius-Maximilians-Universität Wür...\nddb-institution\nsec_04\n[Würzburg]\n[Bayern]\n\n\n3\nCLELTYIEQZZMAYTTNY6TN4BV3KH6OXMT\n[Franckesche Stiftungen]\nddb-institution\nsec_07\n[Halle (Saale)]\n[Sachsen-Anhalt]\n\n\n4\nIWHIY724L2AQF33GY3GGGIMUMQB5IJ3L\n[Universität Hamburg]\nddb-institution\nsec_04\n[Hamburg]\n[Hamburg]\n\n\n...\n...\n...\n...\n...\n...\n...\n\n\n4944\nJ2DGHLWAB42ARH6LS2CXZ7ON2LEZMBY4\n[Katholische Öffentliche Bücherei St. Gertrud ...\nddb-institution\nsec_02\n[Lohne]\n[Niedersachsen]\n\n\n4945\nSIBSZ6D55YO5DF3I2ZAJCY463VMKLO2H\n[Unternehmensarchiv der Vollert GmbH & Co. KG,...\nddb-institution\nsec_01\n[Weinsberg]\n[Baden-Württemberg]\n\n\n4946\nDPKPCTEIZ5OAC4Z45H54PK3ABSCJTVZK\n[Stadtarchiv Friedrichroda]\nddb-institution\nsec_01\n[Friedrichroda]\n[Thüringen]\n\n\n4947\nDWBFG7HIHRMBSXBFZFXS237MY6DXDZOF\n[Museum Wassermühle Beelitz]\nddb-institution\nsec_06\n[Spargelstadt Beelitz]\n[Brandenburg]\n\n\n4948\n5TLSCVVSTMDVOJH5ZVMKLFJPMQE5A3JH\n[Heimatmuseum]\nddb-institution\nsec_06\n[Tribsees]\n[Mecklenburg-Vorpommern]\n\n\n\n\n4949 rows × 6 columns"
  },
  {
    "objectID": "statistic-federal_state.html#join-export-df_join",
    "href": "statistic-federal_state.html#join-export-df_join",
    "title": "Statistik nach Bundesland",
    "section": "3) Join & Export (df_join)",
    "text": "3) Join & Export (df_join)\nDie Provider-Facet-Statistik (df) wird mit den Organisationsdaten (df_org) zusammengeführt. So stehen pro dataprovider_id u.a. label und state_de_fct zur Verfügung; optionaler Export nach Excel.\n\n\nQuelltext anzeigen\n# Join: Provider-Facets (df) + Organisationsdaten (df_org)\ndf_org[\"id\"] = df_org[\"id\"].astype(str)\n\ndf_join = df.merge(df_org, left_on=\"dataprovider_id\", right_on=\"id\", how=\"outer\")\n\n# Für Excel: Array-Spalten lesbar als Strings serialisieren (Listen -&gt; '; '-String)\nfor col in [\"label\", \"city_de_fct\", \"state_de_fct\"]:\n    if col in df_join.columns:\n        df_join[col] = df_join[col].apply(lambda xs: \"; \".join(map(str, xs)) if isinstance(xs, list) else (\"\" if xs is None else str(xs)))\n\n# Optional: doppelte Join-Spalte entfernen und Spaltenordnung setzen\nif \"dataprovider_id\" in df_join.columns:\n    df_join = df_join.drop(columns=[\"dataprovider_id\"])\n\ndf_join = df_join[[\"id\", \"label\", \"type\", \"sector_fct\", \"city_de_fct\", \"state_de_fct\", \"count\"]]\n\n# Ergebnis in Excel-Datei speichern mit Datum\nout_path = \"statistic-federal_state_\" + pd.Timestamp.now().strftime(\"%Y-%m-%d\") + \".xlsx\"\ndf_join.to_excel(out_path, index=False)\n\ndf_join\n\n\n\n\n\n\n\n\n\nid\nlabel\ntype\nsector_fct\ncity_de_fct\nstate_de_fct\ncount\n\n\n\n\n0\n2232YVSIZTZYDAZIBI25LW3TZUY6DZVH\nBayerisches Hauptstaatsarchiv\nddb-institution\nsec_01\nMünchen\nBayern\n547576.0\n\n\n1\n226MOGFFOBKT6CHOUZTN7YNJSQBBDW44\nTU Dresden - Institut für Zoologie\nddb-institution\nsec_04\nDresden\nSachsen\nNaN\n\n\n2\n22TRYIUQYEFVQ3VION3IC3COCUCXDE6Q\nArchiv des Freiherrn von Loe, Raphael\nddb-institution\nsec_01\nWeeze\nNordrhein-Westfalen\nNaN\n\n\n3\n23H2TZEXAWO4MNHRYEGGR7FWP4KZQLZ2\nSLUB Dresden. Zweigbibliothek Forstwesen\nddb-institution\nsec_02\nTharandt\nSachsen\nNaN\n\n\n4\n23SQB2WOH356NR7UHLNPB6UQOWNFAU5J\nKreisarchiv des Kreises Steinburg und der Stad...\nddb-institution\nsec_01\nItzehoe\nSchleswig-Holstein\nNaN\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n4944\nZZ73OW3EYCPB6AW4NX7JSWIBCD6KCFOG\nStadtarchiv Crailsheim\nddb-institution\nsec_01\nCrailsheim\nBaden-Württemberg\nNaN\n\n\n4945\nZZCJXBDSTGE54QDZOKZRFUN2MWY5O6NX\nKreisarchiv des Saale-Holzland-Kreises\nddb-institution\nsec_01\nEisenberg\nThüringen\nNaN\n\n\n4946\nZZDXSR6MZGWV7LMPQ5PDJNFXVTKDDIMK\nStadtarchiv Gevelsberg\nddb-institution\nsec_01\nGevelsberg\nNordrhein-Westfalen\nNaN\n\n\n4947\nZZT2BWVIDOAU2KRL6MQJZOYVOSLFYFJ4\nStadtarchiv Göppingen\nddb-institution\nsec_01\nGöppingen\nBaden-Württemberg\nNaN\n\n\n4948\nZZXTNUHH5WCU72IYEM7KKV7BCBIND43G\nStaatliches Institut für Musikforschung PK\nddb-institution\nsec_04\nBerlin\nBerlin\nNaN\n\n\n\n\n4949 rows × 7 columns"
  },
  {
    "objectID": "statistic-federal_state.html#auswertung-nach-bundesland-agg",
    "href": "statistic-federal_state.html#auswertung-nach-bundesland-agg",
    "title": "Statistik nach Bundesland",
    "section": "4) Auswertung nach Bundesland (agg)",
    "text": "4) Auswertung nach Bundesland (agg)\nAus df_join wird pro Bundesland aggregiert: - Anzahl Einrichtungen (gesamt) - Anzahl liefernder Einrichtungen (count &gt; 0) - Summe der Objekte (count) Ergebnis: DataFrame agg (absteigend sortiert).\n\n\nQuelltext anzeigen\n# Bundesland-Auswertung (pandas-only)\n\n# Hinweis: Diese Zelle setzt voraus, dass oben bereits df_join erzeugt wurde.\n\ndf_bl = df_join.loc[df_join[\"id\"].notna(), [\"id\", \"state_de_fct\", \"count\"]].copy()\ndf_bl[\"count\"] = pd.to_numeric(df_bl[\"count\"], errors=\"coerce\").fillna(0).astype(\"int64\")\n\n# state_de_fct ist nach dem Join serialisiert (\"; \"-getrennt). Für die Zuordnung wird der erste Wert verwendet.\ndf_bl[\"bundesland\"] = (\n    df_bl[\"state_de_fct\"]\n    .fillna(\"\")\n    .astype(str)\n    .str.split(\"; \")\n    .str[0]\n    .str.strip()\n    .replace({\"\": \"Ausland\"})\n)\n\neinrichtungen = df_bl.groupby(\"bundesland\")[\"id\"].nunique().rename(\"einrichtungen\")\nliefernde = (\n    df_bl.loc[df_bl[\"count\"] &gt; 0]\n    .groupby(\"bundesland\")[\"id\"]\n    .nunique()\n    .rename(\"liefernde_einrichtungen\")\n)\nobjekte = df_bl.groupby(\"bundesland\")[\"count\"].sum().rename(\"objekte\")\n\nagg = (\n    pd.concat([einrichtungen, liefernde, objekte], axis=1)\n    .fillna(0)\n    .astype({\"einrichtungen\": \"int64\", \"liefernde_einrichtungen\": \"int64\", \"objekte\": \"int64\"})\n    .sort_values([\"objekte\", \"liefernde_einrichtungen\", \"einrichtungen\"], ascending=False)\n)\n\nagg\n\n\n\n\n\n\n\n\n\neinrichtungen\nliefernde_einrichtungen\nobjekte\n\n\nbundesland\n\n\n\n\n\n\n\nBaden-Württemberg\n589\n57\n11004229\n\n\nHessen\n382\n57\n9878446\n\n\nNordrhein-Westfalen\n883\n157\n9332725\n\n\nSachsen\n385\n54\n7070368\n\n\nBayern\n600\n58\n6390424\n\n\nBerlin\n304\n108\n5206849\n\n\nRheinland-Pfalz\n165\n29\n4553607\n\n\nSachsen-Anhalt\n144\n21\n1972997\n\n\nSchleswig-Holstein\n337\n43\n1774401\n\n\nNiedersachsen\n385\n58\n1744794\n\n\nBrandenburg\n198\n41\n1705442\n\n\nHamburg\n97\n20\n1366746\n\n\nThüringen\n282\n72\n355308\n\n\nMecklenburg-Vorpommern\n102\n15\n348860\n\n\nAusland\n13\n4\n167669\n\n\nBremen\n40\n11\n65789\n\n\nSaarland\n43\n15\n64605"
  },
  {
    "objectID": "statistic-federal_state.html#visualisierung",
    "href": "statistic-federal_state.html#visualisierung",
    "title": "Statistik nach Bundesland",
    "section": "5) Visualisierung",
    "text": "5) Visualisierung\nZwei horizontale Balkendiagramme (Top-N): - Objekte je Bundesland - Einrichtungen vs. datenliefernde Einrichtungen je Bundesland\n\n\nQuelltext anzeigen\n# Visualisierung (pandas plot; benötigt matplotlib)\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import FuncFormatter\n\ntop_n = 20\nplot_df = agg.head(top_n).copy()\nplot_df = plot_df.iloc[::-1]  # für barh: klein -&gt; groß\n\nfig, axes = plt.subplots(1, 2, figsize=(14, max(6, 0.35 * len(plot_df))))\n\ndef _format_int_no_sci(x, pos):\n    _ = pos  # required by FuncFormatter signature\n    return f\"{x:,.0f}\".replace(\",\", \".\")\n\n# Objekte\nplot_df[\"objekte\"].plot(kind=\"barh\", ax=axes[0], color=\"#4C78A8\")\naxes[0].set_title(\"Objekte (Top)\")\naxes[0].set_xlabel(\"Anzahl\")\naxes[0].grid(axis=\"x\", linestyle=\":\", alpha=0.4)\naxes[0].xaxis.set_major_formatter(FuncFormatter(_format_int_no_sci))\n\n# Einrichtungen vs. liefernde Einrichtungen\nplot_df_inst = plot_df.rename(columns={\n    \"einrichtungen\": \"Einrichtung\",\n    \"liefernde_einrichtungen\": \"datenliefernde Einrichtung\",\n})\nplot_df_inst[[\"Einrichtung\", \"datenliefernde Einrichtung\"]].plot(kind=\"barh\", ax=axes[1])\naxes[1].set_title(\"Einrichtungen (Top)\")\naxes[1].set_xlabel(\"Anzahl\")\naxes[1].grid(axis=\"x\", linestyle=\":\", alpha=0.4)\naxes[1].legend(loc=\"lower right\")\n\nfig.tight_layout()\nplt.show()"
  },
  {
    "objectID": "inspection-invalid_multiple_facets_values.html",
    "href": "inspection-invalid_multiple_facets_values.html",
    "title": "Auffällige Mehrfachwerte je Provider",
    "section": "",
    "text": "Einige Felder können je dataprovider_id mehrere unterschiedliche Werte haben (z.B. durch Datenmischung). Dafür wird ein Solr JSON-Facet genutzt und anschließend client-seitig auf nvals &gt; 1 sowie 32-stellige IDs gefiltert. Hinweis: unique(...) ist in Solr oft ein schneller, näherungsweiser Distinct-Count (für das Finden von Kandidaten meist ausreichend).\nQuelltext anzeigen\nimport requests\nimport pandas as pd\nimport json\nQuelltext anzeigen\n# Organization-Daten (ddb-institution) laden -&gt; DataFrame\nurl_org = \"https://api.deutsche-digitale-bibliothek.de/2/search/index/organization/select\"\nparams_org = {\n    \"q\": \"type:ddb-institution OR type:ddb-aggregator\",\n    \"fl\": \"id,label\",\n    \"rows\": 10000,\n    \"wt\": \"json\",\n}\n\nresp_org = requests.get(url_org, params=params_org, timeout=300)\nresp_org.raise_for_status()\ndata_org = resp_org.json()\n\ndocs = data_org.get(\"response\", {}).get(\"docs\", [])\n\ndef _as_list(value):\n    if value is None:\n        return []\n    # Solr liefert bei *_fct i.d.R. Listen; zur Sicherheit wird auch ein Scalar zu einer Liste normalisiert\n    return value if isinstance(value, list) else [value]\n\ndf_org = pd.DataFrame({\n    \"id\": [d.get(\"id\") for d in docs],\n    \"label\": [_as_list(d.get(\"label\")) for d in docs],\n})\n\ndf_org\n\n\n\n\n\n\n\n\n\nid\nlabel\n\n\n\n\n0\n5IMBCSZN7ZVL77HVH4GKX3GXNPD6X2NO\n[Deutsche Fotothek]\n\n\n1\nDWIVLJW5JBO7X4XRO2Y7PCGZSHLTUS6F\n[Digitales Kunst- und Kulturarchiv Düsseldorf ...\n\n\n2\n3IJSQ3OFJZCXLJLKDTIQIPYYS5TUMJLB\n[Bayerische Julius-Maximilians-Universität Wür...\n\n\n3\nCLELTYIEQZZMAYTTNY6TN4BV3KH6OXMT\n[Franckesche Stiftungen]\n\n\n4\nIWHIY724L2AQF33GY3GGGIMUMQB5IJ3L\n[Universität Hamburg]\n\n\n...\n...\n...\n\n\n4944\nJ2DGHLWAB42ARH6LS2CXZ7ON2LEZMBY4\n[Katholische Öffentliche Bücherei St. Gertrud ...\n\n\n4945\nSIBSZ6D55YO5DF3I2ZAJCY463VMKLO2H\n[Unternehmensarchiv der Vollert GmbH & Co. KG,...\n\n\n4946\nDPKPCTEIZ5OAC4Z45H54PK3ABSCJTVZK\n[Stadtarchiv Friedrichroda]\n\n\n4947\nDWBFG7HIHRMBSXBFZFXS237MY6DXDZOF\n[Museum Wassermühle Beelitz]\n\n\n4948\n5TLSCVVSTMDVOJH5ZVMKLFJPMQE5A3JH\n[Heimatmuseum]\n\n\n\n\n4949 rows × 2 columns\nQuelltext anzeigen\nurl = \"https://api.deutsche-digitale-bibliothek.de/2/search/index/search/select\"\nparams = {\n    \"q\": \"*:*\",\n    \"rows\": 0,\n    \"wt\": \"json\",\n    \"json.facet\": json.dumps({\n        \"providers\": {\n            \"type\": \"terms\",\n            \"field\": \"dataprovider_id\",\n            \"limit\": -1,\n            \"mincount\": 1,\n            \"facet\": {\n                # distinct count (i.d.R. HLL/approx, dafür schnell)\n                \"nvals\": \"unique(dataprovider_fct)\"\n            },\n            \"sort\": \"nvals desc\"\n        }\n    })\n}\n\nj = requests.get(url, params=params, timeout=300).json()\nbuckets = j[\"facets\"][\"providers\"][\"buckets\"]\n\n# Nur auffällige Fälle\nauffaellig = [b for b in buckets if b.get(\"nvals\", 0) &gt; 1]\n\n# -&gt; DataFrame\ndf_auffaellig = pd.DataFrame([\n    {\n        \"dataprovider_id\": str(b.get(\"val\", \"\")),\n        \"dataprovider_fct_nvalues\": int(b.get(\"nvals\", 0) or 0),\n    }\n    for b in auffaellig\n])\n\n# nur 32-stellige IDs behalten\ndf_auffaellig = df_auffaellig[df_auffaellig[\"dataprovider_id\"].str.len() == 32].copy()\n\n# Label aus df_org anreichern (falls df_org existiert)\ndf_auffaellig = (\n    df_auffaellig\n    .merge(df_org[[\"id\", \"label\"]], left_on=\"dataprovider_id\", right_on=\"id\", how=\"left\")\n    .drop(columns=[\"id\"])\n)\n\ndf_auffaellig\n\n\n\n\n\n\n\n\n\ndataprovider_id\ndataprovider_fct_nvalues\nlabel\n\n\n\n\n0\n7A5GWWGTIAUDXLN6JNTFKKZUM27GCGGI\n2\n[Staatliche Kunstsammlungen Dresden. GRASSI Mu...\n\n\n1\nZCXCMB7WXARQK27QKZY6ZQSH23D4YEOA\n2\n[Queer*Feministische Bibliothek und Archiv LIE..."
  },
  {
    "objectID": "inspection-invalid_multiple_facets_values.html#variante-mehrfachwerte-in-sector_fct",
    "href": "inspection-invalid_multiple_facets_values.html#variante-mehrfachwerte-in-sector_fct",
    "title": "Auffällige Mehrfachwerte je Provider",
    "section": "Variante: Mehrfachwerte in sector_fct",
    "text": "Variante: Mehrfachwerte in sector_fct\nGleiche Logik wie oben, aber für sector_fct (Sektor-Klassifikation). Ergebnis: df_auffaellig, angereichert mit label aus df_join.\n\n\nQuelltext anzeigen\nurl = \"https://api.deutsche-digitale-bibliothek.de/2/search/index/search/select\"\nparams = {\n    \"q\": \"*:*\",\n    \"rows\": 0,\n    \"wt\": \"json\",\n    \"json.facet\": json.dumps({\n        \"providers\": {\n            \"type\": \"terms\",\n            \"field\": \"dataprovider_id\",\n            \"limit\": -1,\n            \"mincount\": 1,\n            \"facet\": {\n                # distinct count (i.d.R. HLL/approx, dafür schnell)\n                \"nvals\": \"unique(sector_fct)\"\n            },\n            \"sort\": \"nvals desc\"\n        }\n    })\n}\n\nj = requests.get(url, params=params, timeout=300).json()\nbuckets = j[\"facets\"][\"providers\"][\"buckets\"]\n\n# Nur auffällige Fälle\nauffaellig = [b for b in buckets if b.get(\"nvals\", 0) &gt; 1]\n\n# -&gt; DataFrame\ndf_auffaellig = pd.DataFrame([\n    {\n        \"dataprovider_id\": str(b.get(\"val\", \"\")),\n        \"sector_fct_nvalues\": int(b.get(\"nvals\", 0) or 0),\n    }\n    for b in auffaellig\n])\n\n# nur 32-stellige IDs behalten\ndf_auffaellig = df_auffaellig[df_auffaellig[\"dataprovider_id\"].str.len() == 32].copy()\n\n# Label aus df_org anreichern (falls df_org existiert)\ndf_auffaellig = (\n    df_auffaellig\n    .merge(df_org[[\"id\", \"label\"]], left_on=\"dataprovider_id\", right_on=\"id\", how=\"left\")\n    .drop(columns=[\"id\"])\n)\n\ndf_auffaellig\n\n\n\n\n\n\n\n\n\ndataprovider_id\nsector_fct_nvalues\nlabel\n\n\n\n\n0\nA52WOLFHOQ4JDAPIGD7O7XJTP6N7FZ5E\n2\n[Stiftung Berliner Mauer]"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ddblabs-statistics",
    "section": "",
    "text": "Eine kleine Sammlung von Jupyter-Notebooks für Auswertungen zur Deutschen Digitalen Bibliothek."
  },
  {
    "objectID": "index.html#nachnutzen",
    "href": "index.html#nachnutzen",
    "title": "ddblabs-statistics",
    "section": "Nachnutzen",
    "text": "Nachnutzen\n\nVS Code for the Web: https://vscode.dev/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics\nDownload ZIP: https://github.com/Deutsche-Digitale-Bibliothek/ddblabs-statistics/archive/refs/heads/main.zip\nOpen in GitHub Desktop: &lt;x-github-client://openRepo/https://github.com/Deutsche-Digitale-Bibliothek/ddblabs-statistics&gt;"
  },
  {
    "objectID": "index.html#notebooks",
    "href": "index.html#notebooks",
    "title": "ddblabs-statistics",
    "section": "Notebooks",
    "text": "Notebooks\nDie Notebook-Liste wird automatisch generiert:\n\nnotebooks.qmd"
  },
  {
    "objectID": "index.html#weitere-ausführungsoptionen",
    "href": "index.html#weitere-ausführungsoptionen",
    "title": "ddblabs-statistics",
    "section": "Weitere Ausführungsoptionen",
    "text": "Weitere Ausführungsoptionen\n\nGitHub Codespaces: https://github.com/codespaces/new?repo=Deutsche-Digitale-Bibliothek/ddblabs-statistics&ref=main\nKaggle: https://www.kaggle.com/code/new (im Editor: File → Import Notebook → GitHub)\n\n\nHinweis: Die Website rendert die Notebooks ohne Ausführung (keine API-Calls während des Builds)."
  },
  {
    "objectID": "notebooks.html",
    "href": "notebooks.html",
    "title": "Notebooks",
    "section": "",
    "text": "Diese Seite wird automatisch aus den vorhandenen .ipynb-Dateien erzeugt.\nHinweis: Auf GitHub Pages werden Notebooks nicht ausgeführt; es werden nur vorhandene Outputs gerendert."
  },
  {
    "objectID": "notebooks.html#nachnutzen",
    "href": "notebooks.html#nachnutzen",
    "title": "Notebooks",
    "section": "Nachnutzen",
    "text": "Nachnutzen\n\nVS Code for the Web: https://vscode.dev/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics\nDownload ZIP: https://github.com/Deutsche-Digitale-Bibliothek/ddblabs-statistics/archive/refs/heads/main.zip\nOpen in GitHub Desktop: &lt;x-github-client://openRepo/https://github.com/Deutsche-Digitale-Bibliothek/ddblabs-statistics&gt;\nGitHub Codespaces: https://github.com/codespaces/new?repo=Deutsche-Digitale-Bibliothek/ddblabs-statistics&ref=main\nKaggle: https://www.kaggle.com/code/new (im Editor: File → Import Notebook → GitHub)"
  },
  {
    "objectID": "notebooks.html#auffällige-mehrfachwerte-je-provider",
    "href": "notebooks.html#auffällige-mehrfachwerte-je-provider",
    "title": "Notebooks",
    "section": "Auffällige Mehrfachwerte je Provider",
    "text": "Auffällige Mehrfachwerte je Provider\n\nSeite: inspection-invalid_multiple_facets_values.ipynb\nColab: https://colab.research.google.com/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics/blob/main/inspection-invalid_multiple_facets_values.ipynb\nBinder: https://mybinder.org/v2/gh/Deutsche-Digitale-Bibliothek/ddblabs-statistics/main?filepath=inspection-invalid_multiple_facets_values.ipynb\nnbviewer: https://nbviewer.org/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics/blob/main/inspection-invalid_multiple_facets_values.ipynb"
  },
  {
    "objectID": "notebooks.html#statistik-nach-bundesland",
    "href": "notebooks.html#statistik-nach-bundesland",
    "title": "Notebooks",
    "section": "Statistik nach Bundesland",
    "text": "Statistik nach Bundesland\n\nSeite: statistic-federal_state.ipynb\nColab: https://colab.research.google.com/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics/blob/main/statistic-federal_state.ipynb\nBinder: https://mybinder.org/v2/gh/Deutsche-Digitale-Bibliothek/ddblabs-statistics/main?filepath=statistic-federal_state.ipynb\nnbviewer: https://nbviewer.org/github/Deutsche-Digitale-Bibliothek/ddblabs-statistics/blob/main/statistic-federal_state.ipynb"
  }
]